<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>?????? ??????????</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; margin: 0; }
    h2 { font-size: 16px; text-align: center; margin-bottom: 20px; }
    .btn-container { text-align: center; margin-bottom: 20px; }
    .btn { padding: 10px 20px; margin: 5px; font-size: 16px; border:none; border-radius:5px;
           background:#D96B1C; color:#fff; cursor:pointer; }
    .btn:hover { background:#C36019; }
    table { width:100%; border-collapse:collapse; margin-top:20px; }
    th, td { border:1px solid #ccc; padding:10px; text-align:left; }
    th { background:#f4f4f4; cursor:pointer; }
    .team-header td { background:#eef; font-weight:bold; padding:8px; }
    @media (max-width:480px) {
      body { font-size:12px; padding:10px; }
      th, td { padding:4px; font-size:10px; }
    }
  </style>
</head>
<body>
  <h2>???????? ?????????</h2>
  <div class="btn-container">
    <button class="btn" onclick="filterGroup('A')">??????????</button>
    <button class="btn" onclick="filterGroup('B')">?? ??????</button>
    <button class="btn" onclick="filterGroup('?????????')">?????????</button>
  </div>
  <table id="participants">
    <thead><tr id="tableHeader"></tr></thead>
    <tbody></tbody>
  </table>
  <script>
    const participants = [{"group":"B","fullName":"??????? ????? ??????????","fshrId":"468075","rating":"1128","birthDate":"2013"},{"group":"B","fullName":"??????? ???? ????????","fshrId":"","rating":"","birthDate":"2015"},{"group":"B","fullName":"??????? ??????? ??????????","fshrId":"621581","rating":"1173","birthDate":"2015"},{"group":"B","fullName":"???????  ?????  ????????? ","fshrId":"700681","rating":"1023","birthDate":"2015"},{"group":"B","fullName":"???????? ???????  ????? ","fshrId":"633285","rating":"1224","birthDate":"2017"},{"group":"B","fullName":"??????????? ?????? ??????????","fshrId":"534913","rating":"1234","birthDate":"2017"},{"group":"B","fullName":"????????? ?????? ??????????","fshrId":"687256","rating":"1231","birthDate":"2013"},{"group":"B","fullName":"??????? ???? ?????????????","fshrId":"648368","rating":"1316","birthDate":"2018"},{"group":"A","fullName":"????????  ????? ?????????","fshrId":"","rating":"","birthDate":"2018"},{"group":"?????????","teamName":"??????? ","players":[{"name":"??????? ?????????  ????????","id":"648423"},{"name":"??????? ???? ?????????? ","id":""}]},{"group":"B","fullName":"????????? ?????? ?????????????","fshrId":"382890","rating":"1320","birthDate":"2011"},{"group":"B","fullName":"??????? ???????? ??????????","fshrId":"","rating":"","birthDate":"2014"},{"group":"A","fullName":"????????? ???????  ?????????? ","fshrId":"156283","rating":"766","birthDate":"2017"},{"group":"A","fullName":"??????? ?????? ????????","fshrId":"155516","rating":"826","birthDate":"2016"},{"group":"B","fullName":"???????? ???? ??????????","fshrId":"644168","rating":"1171","birthDate":"2016"},{"group":"B","fullName":"????????? ??????? ??????????","fshrId":"667552","rating":"1000","birthDate":"2015"},{"group":"B","fullName":"???????? ?????  ??????? ","fshrId":"527002","rating":"1042","birthDate":"2014"},{"group":"?????????","teamName":"Geometric ","players":[{"name":"????? ??????  ?????????? ","id":"669158"},{"name":"???????? ??????? ??????? ????","id":""}]},{"group":"B","fullName":"??????? ?????? ??????????","fshrId":"421388","rating":"1109","birthDate":"2015"}];
    let current = 'A';

    function renderTable() {
      const thead = document.getElementById('tableHeader');
      const tbody = document.querySelector('#participants tbody');
      tbody.innerHTML = '';

      const filtered = participants.filter(p => p.group === current);

      if (current === 'A' || current === 'B') {
        thead.innerHTML = '<th>#</th><th>???</th><th>ID ???</th><th>??? ????????</th><th>???????</th>';
        filtered.sort((a,b) => (parseFloat(b.rating)||0) - (parseFloat(a.rating)||0))
          .forEach((p,i) => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td>${i+1}</td><td>${p.fullName}</td><td>${p.fshrId}</td><td>${p.birthDate}</td><td>${p.rating}</td>`;
            tbody.appendChild(tr);
          });
      } else {
        thead.innerHTML = '<th>???????? ???????</th><th>????? / ID ???</th>';
        filtered.forEach(team => {
          // ???????? ???????
          const thRow = document.createElement('tr');
          thRow.className = 'team-header';
          thRow.innerHTML = `<td colspan="2">${team.teamName}</td>`;
          tbody.appendChild(thRow);
          // ??????
          team.players.forEach(p => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td>${p.name}</td><td>${p.id}</td>`;
            tbody.appendChild(tr);
          });
        });
      }
    }

    function filterGroup(g) {
      current = g;
      renderTable();
    }

    window.onload = renderTable;
  </script>
</body>
</html>